2025-10-22 12:01:44,195 - __main__ - INFO - Starting RAG system initialization...
2025-10-22 12:01:44,197 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-10-22 12:01:44,197 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-10-22 12:01:52,398 - agents.retrieval_agent - INFO - RetrievalAgent initialized
2025-10-22 12:01:52,398 - __main__ - INFO - Building text index from PDFs...
2025-10-22 12:01:55,624 - agents.retrieval_agent - INFO - Extracted 3 chunks from chapter1_learning_together.pdf
2025-10-22 12:02:05,663 - agents.retrieval_agent - INFO - Extracted 1 chunks from chapter2_wit_and_humour.pdf
2025-10-22 12:02:09,515 - agents.retrieval_agent - INFO - Extracted 3 chunks from chapter3_dreams_and_discoveries.pdf
2025-10-22 12:02:13,193 - agents.retrieval_agent - INFO - Extracted 2 chunks from chapter4_travel_and_adventure.pdf
2025-10-22 12:02:16,664 - agents.retrieval_agent - INFO - Extracted 1 chunks from chapter5_bravehearts.pdf
2025-10-22 12:02:25,466 - agents.retrieval_agent - INFO - Text index built with 429 documents
2025-10-22 12:02:25,466 - __main__ - INFO - Building image index...
2025-10-22 12:02:25,466 - agents.retrieval_agent - INFO - Found 6 images
2025-10-22 12:02:25,921 - agents.retrieval_agent - INFO - Image index built with 6 images
2025-10-22 12:02:25,921 - __main__ - INFO - Indexes created successfully!
2025-10-22 12:02:25,921 - __main__ - INFO - You can now run the Streamlit app: streamlit run streamlit_app.py
2025-10-22 12:39:06,647 - __main__ - INFO - ================================================================================
2025-10-22 12:39:06,648 - __main__ - INFO - Starting RAG System Index Builder
2025-10-22 12:39:06,648 - __main__ - INFO - ================================================================================
2025-10-22 12:39:06,648 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with advanced models...
2025-10-22 12:39:06,649 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-10-22 12:39:06,650 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
2025-10-22 12:39:12,007 - huggingface_hub.file_download - WARNING - Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025-10-22 12:39:32,016 - huggingface_hub.file_download - WARNING - Xet Storage is enabled for this repo, but the 'hf_xet' package is not installed. Falling back to regular HTTP download. For better performance, install the package with: `pip install huggingface_hub[hf_xet]` or `pip install hf_xet`
2025-10-22 12:39:43,033 - sentence_transformers.cross_encoder.CrossEncoder - INFO - Use pytorch device: cpu
2025-10-22 12:39:47,718 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully
2025-10-22 12:39:47,719 - agents.retrieval_agent - INFO - Processing 5 PDF files...
2025-10-22 12:40:28,364 - agents.retrieval_agent - INFO - Total documents extracted: 465
2025-10-22 12:40:28,364 - agents.retrieval_agent - INFO - Generating embeddings for text documents...
2025-10-22 12:41:10,391 - agents.retrieval_agent - INFO - Found 6 images
2025-10-22 12:41:10,391 - agents.retrieval_agent - INFO - Generating embeddings for images...
2025-10-22 12:41:10,997 - __main__ - INFO - Index building completed successfully
2025-10-25 14:50:01,385 - __main__ - INFO - ================================================================================
2025-10-25 14:50:01,385 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 14:50:01,385 - __main__ - INFO - ================================================================================
2025-10-25 14:50:01,385 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with advanced models...
2025-10-25 14:50:01,401 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-10-25 14:50:01,402 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
2025-10-25 14:50:20,837 - sentence_transformers.cross_encoder.CrossEncoder - INFO - Use pytorch device: mps
2025-10-25 14:50:26,583 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully
2025-10-25 14:50:26,584 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 14:50:27,335 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 14:50:27,335 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 14:50:27,335 - agents.retrieval_agent - INFO - Generating embeddings for text documents...
2025-10-25 14:51:21,282 - __main__ - INFO - ================================================================================
2025-10-25 14:51:21,282 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 14:51:21,282 - __main__ - INFO - ================================================================================
2025-10-25 14:51:21,282 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with advanced models...
2025-10-25 14:51:21,297 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-10-25 14:51:21,297 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
2025-10-25 14:51:28,263 - sentence_transformers.cross_encoder.CrossEncoder - INFO - Use pytorch device: mps
2025-10-25 14:51:34,306 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully
2025-10-25 14:51:34,306 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 14:51:35,104 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 14:51:35,104 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 14:51:35,104 - agents.retrieval_agent - INFO - Generating embeddings for text documents...
2025-10-25 14:56:21,862 - __main__ - INFO - ================================================================================
2025-10-25 14:56:21,863 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 14:56:21,863 - __main__ - INFO - ================================================================================
2025-10-25 14:56:21,863 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with advanced models...
2025-10-25 14:56:21,878 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: mps
2025-10-25 14:56:21,878 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-mpnet-base-v2
2025-10-25 14:56:29,185 - sentence_transformers.cross_encoder.CrossEncoder - INFO - Use pytorch device: mps
2025-10-25 14:56:30,433 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully
2025-10-25 14:56:30,434 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 14:56:31,187 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 14:56:31,187 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 14:56:31,187 - agents.retrieval_agent - INFO - Generating embeddings for text documents...
2025-10-25 15:01:56,497 - __main__ - INFO - ================================================================================
2025-10-25 15:01:56,497 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 15:01:56,497 - __main__ - INFO - ================================================================================
2025-10-25 15:01:56,498 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina API...
2025-10-25 15:01:56,498 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully with Jina API.
2025-10-25 15:01:56,498 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 15:01:57,149 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 15:01:57,150 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 15:01:57,150 - agents.retrieval_agent - INFO - Generating embeddings for text documents via Jina API...
2025-10-25 15:02:06,978 - agents.retrieval_agent - INFO - ✓ Text index built: 85 documents indexed via Jina API
2025-10-25 15:02:06,978 - agents.retrieval_agent - INFO - Found 6 images
2025-10-25 15:02:06,979 - agents.retrieval_agent - INFO - Generating embeddings for images via Jina API...
2025-10-25 15:02:14,698 - agents.retrieval_agent - INFO - ✓ Image index built: 6 images indexed via Jina API
2025-10-25 15:02:14,699 - __main__ - INFO - Index building completed successfully
2025-10-25 15:23:58,726 - __main__ - INFO - ================================================================================
2025-10-25 15:23:58,726 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 15:23:58,726 - __main__ - INFO - ================================================================================
2025-10-25 15:23:58,727 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina API...
2025-10-25 15:23:58,727 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully with Jina API.
2025-10-25 15:23:58,727 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 15:23:59,437 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 15:23:59,438 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 15:23:59,438 - agents.retrieval_agent - INFO - Generating embeddings for text documents via Jina API...
2025-10-25 15:24:07,069 - agents.retrieval_agent - INFO - ✓ Text index built: 85 documents indexed via Jina API
2025-10-25 15:24:07,070 - __main__ - INFO - Index building completed successfully
2025-10-25 15:24:10,298 - __main__ - INFO - ================================================================================
2025-10-25 15:24:10,299 - __main__ - INFO - Starting RAG System Index Builder
2025-10-25 15:24:10,299 - __main__ - INFO - ================================================================================
2025-10-25 15:24:10,300 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina API...
2025-10-25 15:24:10,300 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully with Jina API.
2025-10-25 15:24:10,300 - agents.retrieval_agent - INFO - Processing 1 PDF files...
2025-10-25 15:24:11,214 - agents.retrieval_agent - INFO - ✓ fy25-financial-report_removed.pdf: 85 chunks
2025-10-25 15:24:11,214 - agents.retrieval_agent - INFO - Total documents extracted: 85
2025-10-25 15:24:11,214 - agents.retrieval_agent - INFO - Generating embeddings for text documents via Jina API...
2025-10-25 15:24:27,487 - agents.retrieval_agent - INFO - ✓ Text index built: 85 documents indexed via Jina API
2025-10-25 15:24:27,487 - __main__ - INFO - Index building completed successfully
2025-10-25 16:15:56,341 - __main__ - INFO - ================================================================================
2025-10-25 16:15:56,342 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 16:15:56,342 - __main__ - INFO - ================================================================================
2025-10-25 16:15:56,342 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 16:15:56,342 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina and Gemini APIs...
2025-10-25 16:15:56,342 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 16:15:56,342 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 16:15:56,350 - agents.retrieval_agent - INFO - Analyzing page 1/13...
2025-10-25 16:16:02,013 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:02,013 - agents.retrieval_agent - INFO - Page 1 classified as IMAGE/MIXED.
2025-10-25 16:16:02,016 - agents.retrieval_agent - INFO - Analyzing page 2/13...
2025-10-25 16:16:06,446 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 16:16:06,447 - agents.retrieval_agent - INFO - Page 2 classified as TEXT.
2025-10-25 16:16:06,453 - agents.retrieval_agent - INFO - Analyzing page 3/13...
2025-10-25 16:16:11,455 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:11,456 - agents.retrieval_agent - INFO - Page 3 classified as IMAGE/MIXED.
2025-10-25 16:16:11,457 - agents.retrieval_agent - INFO - Analyzing page 4/13...
2025-10-25 16:16:15,370 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 16:16:15,371 - agents.retrieval_agent - INFO - Page 4 classified as TEXT.
2025-10-25 16:16:15,383 - agents.retrieval_agent - INFO - Analyzing page 5/13...
2025-10-25 16:16:19,652 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:19,652 - agents.retrieval_agent - INFO - Page 5 classified as IMAGE/MIXED.
2025-10-25 16:16:19,653 - agents.retrieval_agent - INFO - Analyzing page 6/13...
2025-10-25 16:16:25,315 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:25,315 - agents.retrieval_agent - INFO - Page 6 classified as IMAGE/MIXED.
2025-10-25 16:16:25,316 - agents.retrieval_agent - INFO - Analyzing page 7/13...
2025-10-25 16:16:30,329 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:30,330 - agents.retrieval_agent - INFO - Page 7 classified as IMAGE/MIXED.
2025-10-25 16:16:30,330 - agents.retrieval_agent - INFO - Analyzing page 8/13...
2025-10-25 16:16:34,831 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:34,831 - agents.retrieval_agent - INFO - Page 8 classified as IMAGE/MIXED.
2025-10-25 16:16:34,831 - agents.retrieval_agent - INFO - Analyzing page 9/13...
2025-10-25 16:16:40,000 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:40,000 - agents.retrieval_agent - INFO - Page 9 classified as IMAGE/MIXED.
2025-10-25 16:16:40,000 - agents.retrieval_agent - INFO - Analyzing page 10/13...
2025-10-25 16:16:44,324 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:44,325 - agents.retrieval_agent - INFO - Page 10 classified as IMAGE/MIXED.
2025-10-25 16:16:44,328 - agents.retrieval_agent - INFO - Analyzing page 11/13...
2025-10-25 16:16:48,110 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:48,110 - agents.retrieval_agent - INFO - Page 11 classified as IMAGE/MIXED.
2025-10-25 16:16:48,112 - agents.retrieval_agent - INFO - Analyzing page 12/13...
2025-10-25 16:16:52,439 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:52,440 - agents.retrieval_agent - INFO - Page 12 classified as IMAGE/MIXED.
2025-10-25 16:16:52,440 - agents.retrieval_agent - INFO - Analyzing page 13/13...
2025-10-25 16:16:58,009 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:16:58,009 - agents.retrieval_agent - INFO - Page 13 classified as IMAGE/MIXED.
2025-10-25 16:16:58,015 - agents.retrieval_agent - INFO - Generating embeddings for 6 text chunks via Jina API...
2025-10-25 16:19:03,780 - agents.retrieval_agent - ERROR - Error calling Jina API: 524 Server Error: <none> for url: https://api.jina.ai/v1/embeddings
2025-10-25 16:19:03,786 - agents.retrieval_agent - INFO - Generating embeddings for 11 image pages via Jina API...
2025-10-25 16:21:09,850 - agents.retrieval_agent - ERROR - Error calling Jina API: 524 Server Error: <none> for url: https://api.jina.ai/v1/embeddings
2025-10-25 16:21:09,858 - __main__ - INFO - Index building completed successfully
2025-10-25 16:49:24,984 - __main__ - INFO - ================================================================================
2025-10-25 16:49:24,985 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 16:49:24,985 - __main__ - INFO - ================================================================================
2025-10-25 16:49:24,985 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 16:49:24,985 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina and Gemini APIs...
2025-10-25 16:49:24,985 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 16:49:24,985 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 16:49:24,994 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-25 16:49:30,756 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:49:30,757 - agents.retrieval_agent - INFO - Page 1 contains images/charts. Extracting text content.
2025-10-25 16:49:30,795 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-25 16:49:34,651 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 16:49:34,651 - agents.retrieval_agent - INFO - Page 2 is text-only. Extracting text content.
2025-10-25 16:49:34,654 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-25 16:49:43,028 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 16:49:43,028 - agents.retrieval_agent - INFO - Page 3 is text-only. Extracting text content.
2025-10-25 16:49:43,036 - agents.retrieval_agent - INFO - Processing page 4/13...
2025-10-25 16:49:48,654 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 16:49:48,655 - agents.retrieval_agent - INFO - Page 4 is text-only. Extracting text content.
2025-10-25 16:49:48,667 - agents.retrieval_agent - INFO - Processing page 5/13...
2025-10-25 16:49:54,120 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:49:54,120 - agents.retrieval_agent - INFO - Page 5 contains images/charts. Extracting text content.
2025-10-25 16:49:54,124 - agents.retrieval_agent - INFO - Processing page 6/13...
2025-10-25 16:49:57,708 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:49:57,710 - agents.retrieval_agent - INFO - Page 6 contains images/charts. Extracting text content.
2025-10-25 16:49:57,716 - agents.retrieval_agent - INFO - Processing page 7/13...
2025-10-25 16:50:01,450 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:01,451 - agents.retrieval_agent - INFO - Page 7 contains images/charts. Extracting text content.
2025-10-25 16:50:01,462 - agents.retrieval_agent - INFO - Processing page 8/13...
2025-10-25 16:50:06,170 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:06,172 - agents.retrieval_agent - INFO - Page 8 contains images/charts. Extracting text content.
2025-10-25 16:50:06,181 - agents.retrieval_agent - INFO - Processing page 9/13...
2025-10-25 16:50:11,692 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:11,693 - agents.retrieval_agent - INFO - Page 9 contains images/charts. Extracting text content.
2025-10-25 16:50:11,705 - agents.retrieval_agent - INFO - Processing page 10/13...
2025-10-25 16:50:17,351 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:17,352 - agents.retrieval_agent - INFO - Page 10 contains images/charts. Extracting text content.
2025-10-25 16:50:17,363 - agents.retrieval_agent - INFO - Processing page 11/13...
2025-10-25 16:50:21,502 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:21,502 - agents.retrieval_agent - INFO - Page 11 contains images/charts. Extracting text content.
2025-10-25 16:50:21,514 - agents.retrieval_agent - INFO - Processing page 12/13...
2025-10-25 16:50:27,326 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:27,327 - agents.retrieval_agent - INFO - Page 12 contains images/charts. Extracting text content.
2025-10-25 16:50:27,336 - agents.retrieval_agent - INFO - Processing page 13/13...
2025-10-25 16:50:36,994 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 16:50:36,995 - agents.retrieval_agent - INFO - Page 13 contains images/charts. Extracting text content.
2025-10-25 16:50:37,008 - agents.retrieval_agent - INFO - Generating embeddings for 49 text chunks via Jina API...
2025-10-25 16:50:44,337 - agents.retrieval_agent - INFO - ✓ Text index built: 49 chunks indexed.
2025-10-25 16:50:44,338 - agents.retrieval_agent - INFO - Removed obsolete image index.
2025-10-25 16:50:44,338 - __main__ - INFO - Index building completed successfully
2025-10-25 17:05:25,299 - __main__ - INFO - ================================================================================
2025-10-25 17:05:25,299 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 17:05:25,299 - __main__ - INFO - ================================================================================
2025-10-25 17:05:25,299 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 17:05:25,300 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina and Gemini APIs...
2025-10-25 17:05:25,300 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 17:05:25,300 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 17:05:25,309 - agents.retrieval_agent - INFO - Analyzing page 1/13...
2025-10-25 17:05:28,855 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:28,856 - agents.retrieval_agent - INFO - Page 1 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:28,858 - agents.retrieval_agent - INFO - Analyzing page 2/13...
2025-10-25 17:05:33,120 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:05:33,121 - agents.retrieval_agent - INFO - Page 2 classified as TEXT_ONLY. Extracting text.
2025-10-25 17:05:33,125 - agents.retrieval_agent - INFO - Analyzing page 3/13...
2025-10-25 17:05:36,758 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:36,759 - agents.retrieval_agent - INFO - Page 3 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:36,759 - agents.retrieval_agent - INFO - Analyzing page 4/13...
2025-10-25 17:05:39,049 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:05:39,050 - agents.retrieval_agent - INFO - Page 4 classified as TEXT_ONLY. Extracting text.
2025-10-25 17:05:39,061 - agents.retrieval_agent - INFO - Analyzing page 5/13...
2025-10-25 17:05:42,168 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:42,168 - agents.retrieval_agent - INFO - Page 5 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:42,168 - agents.retrieval_agent - INFO - Analyzing page 6/13...
2025-10-25 17:05:45,312 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:45,312 - agents.retrieval_agent - INFO - Page 6 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:45,312 - agents.retrieval_agent - INFO - Analyzing page 7/13...
2025-10-25 17:05:48,106 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:48,106 - agents.retrieval_agent - INFO - Page 7 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:48,106 - agents.retrieval_agent - INFO - Analyzing page 8/13...
2025-10-25 17:05:51,721 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:51,722 - agents.retrieval_agent - INFO - Page 8 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:51,722 - agents.retrieval_agent - INFO - Analyzing page 9/13...
2025-10-25 17:05:54,725 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:54,726 - agents.retrieval_agent - INFO - Page 9 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:54,727 - agents.retrieval_agent - INFO - Analyzing page 10/13...
2025-10-25 17:05:58,819 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:05:58,819 - agents.retrieval_agent - INFO - Page 10 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:05:58,820 - agents.retrieval_agent - INFO - Analyzing page 11/13...
2025-10-25 17:06:01,802 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:06:01,802 - agents.retrieval_agent - INFO - Page 11 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:06:01,804 - agents.retrieval_agent - INFO - Analyzing page 12/13...
2025-10-25 17:06:04,997 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:06:04,997 - agents.retrieval_agent - INFO - Page 12 classified as IMAGE_CHART. Embedding full page image.
2025-10-25 17:06:04,997 - agents.retrieval_agent - INFO - Analyzing page 13/13...
2025-10-25 17:06:13,597 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:06:13,598 - agents.retrieval_agent - INFO - Page 13 classified as TEXT_ONLY. Extracting text.
2025-10-25 17:06:13,606 - agents.retrieval_agent - INFO - Generating embeddings for 10 text chunks via Jina API...
2025-10-25 17:06:19,759 - agents.retrieval_agent - INFO - ✓ Text index built: 10 chunks indexed.
2025-10-25 17:06:19,759 - agents.retrieval_agent - INFO - Generating embeddings for 10 image pages via Jina API...
2025-10-25 17:06:24,444 - agents.retrieval_agent - INFO - ✓ Image index built: 10 pages indexed.
2025-10-25 17:06:24,445 - __main__ - INFO - Index building completed successfully
2025-10-25 17:19:01,637 - __main__ - INFO - ================================================================================
2025-10-25 17:19:01,639 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 17:19:01,639 - __main__ - INFO - ================================================================================
2025-10-25 17:19:01,639 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 17:19:01,639 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Jina and Gemini APIs...
2025-10-25 17:19:01,639 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 17:19:01,639 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 17:19:01,649 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-25 17:19:04,952 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:04,952 - agents.retrieval_agent - INFO - Page 1 contains images/charts. Extracting text content.
2025-10-25 17:19:04,979 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-25 17:19:08,315 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:19:08,316 - agents.retrieval_agent - INFO - Page 2 is text-only. Extracting text content.
2025-10-25 17:19:08,319 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-25 17:19:11,152 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:11,152 - agents.retrieval_agent - INFO - Page 3 contains images/charts. Extracting text content.
2025-10-25 17:19:11,162 - agents.retrieval_agent - INFO - Processing page 4/13...
2025-10-25 17:19:14,088 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:19:14,089 - agents.retrieval_agent - INFO - Page 4 is text-only. Extracting text content.
2025-10-25 17:19:14,098 - agents.retrieval_agent - INFO - Processing page 5/13...
2025-10-25 17:19:17,191 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:17,192 - agents.retrieval_agent - INFO - Page 5 contains images/charts. Extracting text content.
2025-10-25 17:19:17,199 - agents.retrieval_agent - INFO - Processing page 6/13...
2025-10-25 17:19:20,013 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:20,014 - agents.retrieval_agent - INFO - Page 6 contains images/charts. Extracting text content.
2025-10-25 17:19:20,018 - agents.retrieval_agent - INFO - Processing page 7/13...
2025-10-25 17:19:22,776 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:22,777 - agents.retrieval_agent - INFO - Page 7 contains images/charts. Extracting text content.
2025-10-25 17:19:22,781 - agents.retrieval_agent - INFO - Processing page 8/13...
2025-10-25 17:19:26,057 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:26,057 - agents.retrieval_agent - INFO - Page 8 contains images/charts. Extracting text content.
2025-10-25 17:19:26,066 - agents.retrieval_agent - INFO - Processing page 9/13...
2025-10-25 17:19:28,274 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:28,274 - agents.retrieval_agent - INFO - Page 9 contains images/charts. Extracting text content.
2025-10-25 17:19:28,283 - agents.retrieval_agent - INFO - Processing page 10/13...
2025-10-25 17:19:30,875 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:30,876 - agents.retrieval_agent - INFO - Page 10 contains images/charts. Extracting text content.
2025-10-25 17:19:30,885 - agents.retrieval_agent - INFO - Processing page 11/13...
2025-10-25 17:19:34,066 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:34,071 - agents.retrieval_agent - INFO - Page 11 contains images/charts. Extracting text content.
2025-10-25 17:19:34,076 - agents.retrieval_agent - INFO - Processing page 12/13...
2025-10-25 17:19:36,810 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-25 17:19:36,810 - agents.retrieval_agent - INFO - Page 12 contains images/charts. Extracting text content.
2025-10-25 17:19:36,816 - agents.retrieval_agent - INFO - Processing page 13/13...
2025-10-25 17:19:40,603 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-25 17:19:40,606 - agents.retrieval_agent - INFO - Page 13 is text-only. Extracting text content.
2025-10-25 17:19:40,614 - agents.retrieval_agent - INFO - Generating embeddings for 49 text chunks via Jina API...
2025-10-25 17:19:51,455 - agents.retrieval_agent - INFO - ✓ Text index built: 49 chunks indexed.
2025-10-25 17:19:51,456 - __main__ - INFO - Index building completed successfully
2025-10-25 18:54:09,095 - __main__ - INFO - ================================================================================
2025-10-25 18:54:09,096 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 18:54:09,096 - __main__ - INFO - ================================================================================
2025-10-25 18:54:09,096 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 18:54:09,096 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 18:54:09,099 - __main__ - ERROR - Fatal error: Failed to parse: :memory:
Traceback (most recent call last):
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/urllib3/util/url.py", line 423, in parse_url
    host, port = _HOST_PORT_RE.match(host_port).groups()  # type: ignore[union-attr]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'groups'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 69, in <module>
    main()
    ~~~~^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 49, in main
    retrieval = RetrievalAgent()
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/agents/retrieval_agent.py", line 35, in __init__
    self.qdrant_client = QdrantClient(url=QDRANT_URL, api_key=QDRANT_API_KEY)
                         ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_client.py", line 139, in __init__
    self._client = QdrantRemote(
                   ~~~~~~~~~~~~^
        url=url,
        ^^^^^^^^
    ...<11 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_remote.py", line 93, in __init__
    parsed_url: Url = parse_url(url)
                      ~~~~~~~~~^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/urllib3/util/url.py", line 449, in parse_url
    raise LocationParseError(source_url) from e
urllib3.exceptions.LocationParseError: Failed to parse: :memory:
2025-10-25 18:57:54,492 - __main__ - INFO - ================================================================================
2025-10-25 18:57:54,492 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 18:57:54,492 - __main__ - INFO - ================================================================================
2025-10-25 18:57:54,492 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 18:57:54,492 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 18:57:54,495 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 18:57:54,495 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 18:57:54,504 - agents.retrieval_agent - INFO - Capturing page 1/13 as image...
2025-10-25 18:57:54,842 - agents.retrieval_agent - INFO - Capturing page 2/13 as image...
2025-10-25 18:57:54,909 - agents.retrieval_agent - INFO - Capturing page 3/13 as image...
2025-10-25 18:57:55,013 - agents.retrieval_agent - INFO - Capturing page 4/13 as image...
2025-10-25 18:57:55,094 - agents.retrieval_agent - INFO - Capturing page 5/13 as image...
2025-10-25 18:57:55,175 - agents.retrieval_agent - INFO - Capturing page 6/13 as image...
2025-10-25 18:57:55,239 - agents.retrieval_agent - INFO - Capturing page 7/13 as image...
2025-10-25 18:57:55,321 - agents.retrieval_agent - INFO - Capturing page 8/13 as image...
2025-10-25 18:57:55,402 - agents.retrieval_agent - INFO - Capturing page 9/13 as image...
2025-10-25 18:57:55,483 - agents.retrieval_agent - INFO - Capturing page 10/13 as image...
2025-10-25 18:57:55,572 - agents.retrieval_agent - INFO - Capturing page 11/13 as image...
2025-10-25 18:57:55,767 - agents.retrieval_agent - INFO - Capturing page 12/13 as image...
2025-10-25 18:57:55,987 - agents.retrieval_agent - INFO - Capturing page 13/13 as image...
2025-10-25 18:57:56,062 - agents.retrieval_agent - INFO - Generating embeddings for 13 pages via Jina CLIP API...
2025-10-25 18:58:02,482 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' not found. Creating new collection.
2025-10-25 18:58:02,540 - agents.retrieval_agent - INFO - ✓ Upserted 13 page images to Qdrant collection 'multimodal-rag-collection'.
2025-10-25 18:58:02,541 - __main__ - INFO - Index building completed successfully
2025-10-25 18:59:15,716 - __main__ - INFO - ================================================================================
2025-10-25 18:59:15,716 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 18:59:15,716 - __main__ - INFO - ================================================================================
2025-10-25 18:59:15,716 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 18:59:15,716 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 18:59:15,719 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 18:59:15,719 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 18:59:15,728 - agents.retrieval_agent - INFO - Capturing page 1/13 as image...
2025-10-25 18:59:16,073 - agents.retrieval_agent - INFO - Capturing page 2/13 as image...
2025-10-25 18:59:16,142 - agents.retrieval_agent - INFO - Capturing page 3/13 as image...
2025-10-25 18:59:16,246 - agents.retrieval_agent - INFO - Capturing page 4/13 as image...
2025-10-25 18:59:16,328 - agents.retrieval_agent - INFO - Capturing page 5/13 as image...
2025-10-25 18:59:16,412 - agents.retrieval_agent - INFO - Capturing page 6/13 as image...
2025-10-25 18:59:16,477 - agents.retrieval_agent - INFO - Capturing page 7/13 as image...
2025-10-25 18:59:16,561 - agents.retrieval_agent - INFO - Capturing page 8/13 as image...
2025-10-25 18:59:16,643 - agents.retrieval_agent - INFO - Capturing page 9/13 as image...
2025-10-25 18:59:16,726 - agents.retrieval_agent - INFO - Capturing page 10/13 as image...
2025-10-25 18:59:16,805 - agents.retrieval_agent - INFO - Capturing page 11/13 as image...
2025-10-25 18:59:16,992 - agents.retrieval_agent - INFO - Capturing page 12/13 as image...
2025-10-25 18:59:17,215 - agents.retrieval_agent - INFO - Capturing page 13/13 as image...
2025-10-25 18:59:17,289 - agents.retrieval_agent - INFO - Generating embeddings for 13 pages via Jina CLIP API...
2025-10-25 18:59:26,235 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' not found. Creating new collection.
2025-10-25 18:59:26,288 - agents.retrieval_agent - INFO - ✓ Upserted 13 page images to Qdrant collection 'multimodal-rag-collection'.
2025-10-25 18:59:26,289 - __main__ - INFO - Index building completed successfully
2025-10-25 19:01:34,178 - __main__ - INFO - ================================================================================
2025-10-25 19:01:34,178 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 19:01:34,178 - __main__ - INFO - ================================================================================
2025-10-25 19:01:34,178 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 19:01:34,178 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 19:01:34,181 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 19:01:34,181 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 19:01:34,184 - agents.retrieval_agent - INFO - Capturing page 1/13 as image...
2025-10-25 19:01:34,514 - agents.retrieval_agent - INFO - Capturing page 2/13 as image...
2025-10-25 19:01:34,582 - agents.retrieval_agent - INFO - Capturing page 3/13 as image...
2025-10-25 19:01:34,686 - agents.retrieval_agent - INFO - Capturing page 4/13 as image...
2025-10-25 19:01:34,768 - agents.retrieval_agent - INFO - Capturing page 5/13 as image...
2025-10-25 19:01:34,851 - agents.retrieval_agent - INFO - Capturing page 6/13 as image...
2025-10-25 19:01:34,914 - agents.retrieval_agent - INFO - Capturing page 7/13 as image...
2025-10-25 19:01:34,995 - agents.retrieval_agent - INFO - Capturing page 8/13 as image...
2025-10-25 19:01:35,076 - agents.retrieval_agent - INFO - Capturing page 9/13 as image...
2025-10-25 19:01:35,158 - agents.retrieval_agent - INFO - Capturing page 10/13 as image...
2025-10-25 19:01:35,239 - agents.retrieval_agent - INFO - Capturing page 11/13 as image...
2025-10-25 19:01:35,423 - agents.retrieval_agent - INFO - Capturing page 12/13 as image...
2025-10-25 19:01:35,641 - agents.retrieval_agent - INFO - Capturing page 13/13 as image...
2025-10-25 19:01:35,715 - agents.retrieval_agent - INFO - Generating embeddings for 13 pages via Jina CLIP API...
2025-10-25 19:01:42,120 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' not found. Creating new collection.
2025-10-25 19:01:42,165 - agents.retrieval_agent - INFO - ✓ Upserted 13 page images to Qdrant collection 'multimodal-rag-collection'.
2025-10-25 19:01:42,166 - __main__ - INFO - Index building completed successfully
2025-10-25 19:03:45,620 - __main__ - INFO - ================================================================================
2025-10-25 19:03:45,620 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 19:03:45,620 - __main__ - INFO - ================================================================================
2025-10-25 19:03:45,620 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 19:03:45,620 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 19:03:46,497 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-25 19:03:46,500 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 19:03:46,501 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 19:03:46,510 - agents.retrieval_agent - INFO - Capturing page 1/13 as image...
2025-10-25 19:03:46,854 - agents.retrieval_agent - INFO - Capturing page 2/13 as image...
2025-10-25 19:03:46,921 - agents.retrieval_agent - INFO - Capturing page 3/13 as image...
2025-10-25 19:03:47,026 - agents.retrieval_agent - INFO - Capturing page 4/13 as image...
2025-10-25 19:03:47,107 - agents.retrieval_agent - INFO - Capturing page 5/13 as image...
2025-10-25 19:03:47,190 - agents.retrieval_agent - INFO - Capturing page 6/13 as image...
2025-10-25 19:03:47,253 - agents.retrieval_agent - INFO - Capturing page 7/13 as image...
2025-10-25 19:03:47,334 - agents.retrieval_agent - INFO - Capturing page 8/13 as image...
2025-10-25 19:03:47,414 - agents.retrieval_agent - INFO - Capturing page 9/13 as image...
2025-10-25 19:03:47,497 - agents.retrieval_agent - INFO - Capturing page 10/13 as image...
2025-10-25 19:03:47,576 - agents.retrieval_agent - INFO - Capturing page 11/13 as image...
2025-10-25 19:03:47,759 - agents.retrieval_agent - INFO - Capturing page 12/13 as image...
2025-10-25 19:03:47,978 - agents.retrieval_agent - INFO - Capturing page 13/13 as image...
2025-10-25 19:03:48,051 - agents.retrieval_agent - INFO - Generating embeddings for 13 pages via Jina CLIP API...
2025-10-25 19:03:57,274 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 404 Not Found"
2025-10-25 19:03:57,276 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' not found. Creating new collection.
2025-10-25 19:03:57,582 - httpx - INFO - HTTP Request: DELETE https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:03:57,964 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:04:03,004 - __main__ - ERROR - Fatal error: The write operation timed out
Traceback (most recent call last):
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
        pool_request.request
    )
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/connection.py", line 103, in handle_request
    return self._connection.handle_request(request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/http11.py", line 136, in handle_request
    raise exc
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/http11.py", line 88, in handle_request
    self._send_request_body(**kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/http11.py", line 159, in _send_request_body
    self._send_event(event, timeout=timeout)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_sync/http11.py", line 166, in _send_event
    self._network_stream.write(bytes_to_send, timeout=timeout)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_backends/sync.py", line 135, in write
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.WriteTimeout: The write operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 134, in send_inner
    response = self._client.send(request)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
        request,
    ...<2 lines>...
        history=[],
    )
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
        request,
        follow_redirects=follow_redirects,
        history=history,
    )
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 249, in handle_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/vbi2/miniconda3/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.WriteTimeout: The write operation timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 69, in <module>
    main()
    ~~~~^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 55, in main
    retrieval.build_index_from_pdf(str(pdf_to_process))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/agents/retrieval_agent.py", line 118, in build_index_from_pdf
    self.qdrant_client.upsert(
    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=QDRANT_COLLECTION_NAME,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        points=points,
        ^^^^^^^^^^^^^^
        wait=True
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_client.py", line 1633, in upsert
    return self._client.upsert(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_remote.py", line 1911, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        ordering=ordering,
        ^^^^^^^^^^^^^^^^^^
    ).result
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 987, in upsert_points
    return self._build_for_upsert_points(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        point_insert_operations=point_insert_operations,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 512, in _build_for_upsert_points
    return self.api_client.request(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        type_=m.InlineResponse2006,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        content=body,
        ^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 112, in send
    response = self.middleware(request, self.send_inner)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 250, in __call__
    return call_next(request)
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 136, in send_inner
    raise ResponseHandlingException(e)
qdrant_client.http.exceptions.ResponseHandlingException: The write operation timed out
2025-10-25 19:04:36,179 - __main__ - INFO - ================================================================================
2025-10-25 19:04:36,179 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 19:04:36,180 - __main__ - INFO - ================================================================================
2025-10-25 19:04:36,180 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 19:04:36,180 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Image-Only Pipeline...
2025-10-25 19:04:37,085 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-25 19:04:37,087 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 19:04:37,088 - agents.retrieval_agent - INFO - Processing PDF: fy25-financial-report_removed.pdf
2025-10-25 19:04:37,093 - agents.retrieval_agent - INFO - Capturing page 1/13 as image...
2025-10-25 19:04:37,441 - agents.retrieval_agent - INFO - Capturing page 2/13 as image...
2025-10-25 19:04:37,509 - agents.retrieval_agent - INFO - Capturing page 3/13 as image...
2025-10-25 19:04:37,613 - agents.retrieval_agent - INFO - Capturing page 4/13 as image...
2025-10-25 19:04:37,693 - agents.retrieval_agent - INFO - Capturing page 5/13 as image...
2025-10-25 19:04:37,776 - agents.retrieval_agent - INFO - Capturing page 6/13 as image...
2025-10-25 19:04:37,839 - agents.retrieval_agent - INFO - Capturing page 7/13 as image...
2025-10-25 19:04:37,919 - agents.retrieval_agent - INFO - Capturing page 8/13 as image...
2025-10-25 19:04:37,999 - agents.retrieval_agent - INFO - Capturing page 9/13 as image...
2025-10-25 19:04:38,080 - agents.retrieval_agent - INFO - Capturing page 10/13 as image...
2025-10-25 19:04:38,157 - agents.retrieval_agent - INFO - Capturing page 11/13 as image...
2025-10-25 19:04:38,340 - agents.retrieval_agent - INFO - Capturing page 12/13 as image...
2025-10-25 19:04:38,558 - agents.retrieval_agent - INFO - Capturing page 13/13 as image...
2025-10-25 19:04:38,632 - agents.retrieval_agent - INFO - Generating embeddings for 13 pages via Jina CLIP API...
2025-10-25 19:04:46,807 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:04:46,812 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' already exists.
2025-10-25 19:04:49,955 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-25 19:04:49,959 - agents.retrieval_agent - INFO - ✓ Upserted batch 1/4 to Qdrant.
2025-10-25 19:04:53,683 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-25 19:04:53,684 - agents.retrieval_agent - INFO - ✓ Upserted batch 2/4 to Qdrant.
2025-10-25 19:04:56,287 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-25 19:04:56,289 - agents.retrieval_agent - INFO - ✓ Upserted batch 3/4 to Qdrant.
2025-10-25 19:04:57,071 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-25 19:04:57,074 - agents.retrieval_agent - INFO - ✓ Upserted batch 4/4 to Qdrant.
2025-10-25 19:04:57,074 - agents.retrieval_agent - INFO - ✓ Finished upserting 13 page images to Qdrant collection 'multimodal-rag-collection'.
2025-10-25 19:04:57,078 - __main__ - INFO - Index building completed successfully
2025-10-25 19:29:14,086 - __main__ - INFO - ================================================================================
2025-10-25 19:29:14,087 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 19:29:14,087 - __main__ - INFO - ================================================================================
2025-10-25 19:29:14,087 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 19:29:14,087 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Qdrant, Jina and Gemini APIs...
2025-10-25 19:29:15,280 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-25 19:29:15,284 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 19:29:15,292 - agents.retrieval_agent - INFO - Converting all pages to images for summary and indexing...
2025-10-25 19:29:16,868 - agents.retrieval_agent - INFO - Generating overall summary for fy25-financial-report_removed.pdf...
2025-10-25 19:30:30,607 - agents.retrieval_agent - INFO - Successfully generated document summary.
2025-10-25 19:30:30,608 - agents.retrieval_agent - INFO - Generating embeddings for all pages...
2025-10-25 19:30:40,690 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:30:40,696 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' exists. Recreating for fresh import.
2025-10-25 19:30:40,989 - httpx - INFO - HTTP Request: DELETE https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:30:41,444 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 19:30:41,450 - agents.retrieval_agent - INFO - Upserting 13 points to Qdrant...
2025-10-25 19:30:42,758 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 400 Bad Request"
2025-10-25 19:30:42,769 - __main__ - ERROR - Fatal error: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value 5d148931-eea3-43e2-8f4f-f5e9a45bb909_page_1 is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 69, in <module>
    main()
    ~~~~^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 55, in main
    retrieval.build_index_from_pdf(str(pdf_to_process))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/agents/retrieval_agent.py", line 129, in build_index_from_pdf
    self.qdrant_client.upsert(
    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=QDRANT_COLLECTION_NAME,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        points=points_to_upsert,
        ^^^^^^^^^^^^^^^^^^^^^^^^
        wait=True
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_client.py", line 1633, in upsert
    return self._client.upsert(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_remote.py", line 1911, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        ordering=ordering,
        ^^^^^^^^^^^^^^^^^^
    ).result
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 987, in upsert_points
    return self._build_for_upsert_points(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        point_insert_operations=point_insert_operations,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 512, in _build_for_upsert_points
    return self.api_client.request(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        type_=m.InlineResponse2006,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        content=body,
        ^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value 5d148931-eea3-43e2-8f4f-f5e9a45bb909_page_1 is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-10-25 21:19:22,033 - __main__ - INFO - ================================================================================
2025-10-25 21:19:22,033 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-25 21:19:22,033 - __main__ - INFO - ================================================================================
2025-10-25 21:19:22,034 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-25 21:19:22,034 - agents.retrieval_agent - INFO - Initializing RetrievalAgent with Qdrant, Jina and Gemini APIs...
2025-10-25 21:19:22,968 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-25 21:19:22,969 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-25 21:19:22,977 - agents.retrieval_agent - INFO - Converting all pages to images for summary and indexing...
2025-10-25 21:19:24,600 - agents.retrieval_agent - INFO - Generating overall summary for fy25-financial-report_removed.pdf...
2025-10-25 21:19:52,463 - agents.retrieval_agent - INFO - Successfully generated document summary.
2025-10-25 21:19:52,463 - agents.retrieval_agent - INFO - Generating embeddings for all pages...
2025-10-25 21:20:01,535 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 21:20:01,539 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' exists. Recreating for fresh import.
2025-10-25 21:20:01,842 - httpx - INFO - HTTP Request: DELETE https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 21:20:02,236 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-25 21:20:02,238 - agents.retrieval_agent - INFO - Upserting 13 points to Qdrant...
2025-10-25 21:20:03,474 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-25 21:20:03,478 - agents.retrieval_agent - INFO - ✓ Finished upserting all pages to Qdrant.
2025-10-25 21:20:03,487 - __main__ - INFO - Index building completed successfully
2025-10-26 09:08:03,403 - __main__ - INFO - ================================================================================
2025-10-26 09:08:03,403 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:08:03,403 - __main__ - INFO - ================================================================================
2025-10-26 09:08:03,403 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:08:03,403 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:08:09,904 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:08:09,906 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:08:09,906 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '66510d7d-1b3e-4c33-bcc1-93ef277f465a'
2025-10-26 09:08:09,917 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-26 09:08:14,310 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:14,310 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:14,311 - agents.retrieval_agent - ERROR - OCR failed on page 1, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:14,350 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-26 09:08:19,192 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:08:19,193 - agents.retrieval_agent - INFO - Text-only page detected. Using native text extraction.
2025-10-26 09:08:19,195 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-26 09:08:23,707 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:23,708 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:23,708 - agents.retrieval_agent - ERROR - OCR failed on page 3, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:23,718 - agents.retrieval_agent - INFO - Processing page 4/13...
2025-10-26 09:08:27,223 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:08:27,224 - agents.retrieval_agent - INFO - Text-only page detected. Using native text extraction.
2025-10-26 09:08:27,231 - agents.retrieval_agent - INFO - Processing page 5/13...
2025-10-26 09:08:31,294 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:31,294 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:31,294 - agents.retrieval_agent - ERROR - OCR failed on page 5, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:31,300 - agents.retrieval_agent - INFO - Processing page 6/13...
2025-10-26 09:08:35,663 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:35,665 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:35,670 - agents.retrieval_agent - ERROR - OCR failed on page 6, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:35,677 - agents.retrieval_agent - INFO - Processing page 7/13...
2025-10-26 09:08:39,557 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:39,558 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:39,558 - agents.retrieval_agent - ERROR - OCR failed on page 7, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:39,562 - agents.retrieval_agent - INFO - Processing page 8/13...
2025-10-26 09:08:43,271 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:43,272 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:43,272 - agents.retrieval_agent - ERROR - OCR failed on page 8, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:43,278 - agents.retrieval_agent - INFO - Processing page 9/13...
2025-10-26 09:08:47,098 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:47,099 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:47,099 - agents.retrieval_agent - ERROR - OCR failed on page 9, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:47,103 - agents.retrieval_agent - INFO - Processing page 10/13...
2025-10-26 09:08:51,144 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:08:51,144 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text.
2025-10-26 09:08:51,144 - agents.retrieval_agent - ERROR - OCR failed on page 10, falling back to native text extraction. Error: get_text() got an unexpected keyword argument 'ocr'
2025-10-26 09:08:51,151 - agents.retrieval_agent - INFO - Processing page 11/13...
2025-10-26 09:11:12,320 - __main__ - INFO - ================================================================================
2025-10-26 09:11:12,320 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:11:12,320 - __main__ - INFO - ================================================================================
2025-10-26 09:11:12,320 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:11:12,320 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:11:13,760 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:11:13,765 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:11:13,765 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '3abeb629-b659-45c9-a99f-baf4b8878fba'
2025-10-26 09:11:13,778 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-26 09:11:22,675 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:11:22,675 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:11:22,854 - agents.retrieval_agent - ERROR - OCR failed on page 1, falling back to native block extraction. Error: No tessdata specified and Tesseract is not installed
2025-10-26 09:11:22,878 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-26 09:11:26,260 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:11:26,261 - agents.retrieval_agent - INFO - Text-only page detected. Using native block extraction.
2025-10-26 09:11:26,263 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-26 09:16:17,041 - __main__ - INFO - ================================================================================
2025-10-26 09:16:17,042 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:16:17,042 - __main__ - INFO - ================================================================================
2025-10-26 09:16:17,042 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:16:17,042 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:16:18,562 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:16:18,563 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:16:18,563 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '8649d265-3fc7-48e0-a583-d145068642f2'
2025-10-26 09:16:18,573 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-26 09:16:22,817 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:16:22,818 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:16:26,451 - agents.retrieval_agent - ERROR - OCR failed on page 1, falling back to native block extraction. Error: 'TextPage' object has no attribute 'close'
2025-10-26 09:16:26,473 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-26 09:16:28,834 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:16:28,835 - agents.retrieval_agent - INFO - Text-only page detected. Using native block extraction.
2025-10-26 09:16:28,836 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-26 09:16:31,256 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:16:31,257 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:16:31,355 - agents.retrieval_agent - ERROR - OCR failed on page 3, falling back to native block extraction. Error: 'TextPage' object has no attribute 'close'
2025-10-26 09:16:31,359 - agents.retrieval_agent - INFO - Processing page 4/13...
2025-10-26 09:16:33,851 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:16:33,851 - agents.retrieval_agent - INFO - Text-only page detected. Using native block extraction.
2025-10-26 09:16:33,859 - agents.retrieval_agent - INFO - Processing page 5/13...
2025-10-26 09:16:36,392 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:16:36,394 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:16:36,494 - agents.retrieval_agent - ERROR - OCR failed on page 5, falling back to native block extraction. Error: 'TextPage' object has no attribute 'close'
2025-10-26 09:16:36,496 - agents.retrieval_agent - INFO - Processing page 6/13...
2025-10-26 09:18:06,157 - __main__ - INFO - ================================================================================
2025-10-26 09:18:06,157 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:18:06,157 - __main__ - INFO - ================================================================================
2025-10-26 09:18:06,157 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:18:06,157 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:18:07,432 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:18:07,436 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:18:07,437 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '6860cf21-ae5e-48a9-8bd4-2eb451035cb9'
2025-10-26 09:18:07,449 - agents.retrieval_agent - INFO - Processing page 1/13...
2025-10-26 09:18:11,083 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:11,083 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:11,266 - agents.retrieval_agent - INFO - Processing page 2/13...
2025-10-26 09:18:14,101 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:18:14,103 - agents.retrieval_agent - INFO - Text-only page detected. Using native block extraction.
2025-10-26 09:18:14,105 - agents.retrieval_agent - INFO - Processing page 3/13...
2025-10-26 09:18:17,125 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:17,125 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:17,213 - agents.retrieval_agent - INFO - Processing page 4/13...
2025-10-26 09:18:22,339 - agents.retrieval_agent - INFO - Layout analysis result: NO
2025-10-26 09:18:22,340 - agents.retrieval_agent - INFO - Text-only page detected. Using native block extraction.
2025-10-26 09:18:22,344 - agents.retrieval_agent - INFO - Processing page 5/13...
2025-10-26 09:18:25,447 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:25,448 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:25,565 - agents.retrieval_agent - INFO - Processing page 6/13...
2025-10-26 09:18:27,782 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:27,783 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:28,047 - agents.retrieval_agent - INFO - Processing page 7/13...
2025-10-26 09:18:30,326 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:30,327 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:31,033 - agents.retrieval_agent - INFO - Processing page 8/13...
2025-10-26 09:18:34,875 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:34,875 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:35,426 - agents.retrieval_agent - INFO - Processing page 9/13...
2025-10-26 09:18:37,922 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:37,923 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:38,423 - agents.retrieval_agent - INFO - Processing page 10/13...
2025-10-26 09:18:40,898 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:40,899 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:41,363 - agents.retrieval_agent - INFO - Processing page 11/13...
2025-10-26 09:18:44,570 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:44,570 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:45,032 - agents.retrieval_agent - INFO - Processing page 12/13...
2025-10-26 09:18:49,338 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:49,338 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:49,528 - agents.retrieval_agent - INFO - Processing page 13/13...
2025-10-26 09:18:54,346 - agents.retrieval_agent - INFO - Layout analysis result: YES
2025-10-26 09:18:54,449 - agents.retrieval_agent - INFO - Visual content detected. Using OCR to extract text blocks.
2025-10-26 09:18:55,011 - agents.retrieval_agent - INFO - Generating embeddings for 31 text chunks...
2025-10-26 09:34:29,242 - __main__ - INFO - ================================================================================
2025-10-26 09:34:29,242 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:34:29,242 - __main__ - INFO - ================================================================================
2025-10-26 09:34:29,242 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:34:29,242 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:34:30,580 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:34:30,584 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:34:30,584 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '0f50a23d-5427-479f-ba86-08dc1434ee0b'
2025-10-26 09:34:30,589 - agents.retrieval_agent - INFO - Extracting content from page 1/13...
2025-10-26 09:34:34,510 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_1.jpg: YES
2025-10-26 09:34:34,694 - agents.retrieval_agent - INFO - Extracting content from page 2/13...
2025-10-26 09:34:37,677 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_2.jpg: NO
2025-10-26 09:34:37,678 - agents.retrieval_agent - INFO - Extracting content from page 3/13...
2025-10-26 09:34:40,212 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_3.jpg: YES
2025-10-26 09:34:40,311 - agents.retrieval_agent - INFO - Extracting content from page 4/13...
2025-10-26 09:34:44,226 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_4.jpg: NO
2025-10-26 09:34:44,234 - agents.retrieval_agent - INFO - Extracting content from page 5/13...
2025-10-26 09:34:46,660 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_5.jpg: YES
2025-10-26 09:34:46,778 - agents.retrieval_agent - INFO - Extracting content from page 6/13...
2025-10-26 09:34:49,383 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_6.jpg: YES
2025-10-26 09:34:49,650 - agents.retrieval_agent - INFO - Extracting content from page 7/13...
2025-10-26 09:34:51,938 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_7.jpg: YES
2025-10-26 09:34:52,641 - agents.retrieval_agent - INFO - Extracting content from page 8/13...
2025-10-26 09:34:55,942 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_8.jpg: YES
2025-10-26 09:34:56,503 - agents.retrieval_agent - INFO - Extracting content from page 9/13...
2025-10-26 09:34:58,906 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_9.jpg: YES
2025-10-26 09:34:59,423 - agents.retrieval_agent - INFO - Extracting content from page 10/13...
2025-10-26 09:35:02,519 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_10.jpg: YES
2025-10-26 09:35:02,990 - agents.retrieval_agent - INFO - Extracting content from page 11/13...
2025-10-26 09:35:06,181 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_11.jpg: YES
2025-10-26 09:35:07,840 - agents.retrieval_agent - INFO - Extracting content from page 12/13...
2025-10-26 09:35:10,587 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_12.jpg: YES
2025-10-26 09:35:10,780 - agents.retrieval_agent - INFO - Extracting content from page 13/13...
2025-10-26 09:35:21,333 - agents.retrieval_agent - INFO - Layout analysis result for 0f50a23d-5427-479f-ba86-08dc1434ee0b_page_13.jpg: YES
2025-10-26 09:35:22,226 - agents.retrieval_agent - INFO - Starting parallel embedding for 31 chunks...
2025-10-26 09:35:29,366 - agents.retrieval_agent - INFO - Parallel embedding complete. Upserting to Qdrant...
2025-10-26 09:35:30,537 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-26 09:35:30,545 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' already exists.
2025-10-26 09:35:31,914 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 400 Bad Request"
2025-10-26 09:35:31,921 - __main__ - ERROR - Fatal error: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value 0f50a23d-5427-479f-ba86-08dc1434ee0b_p4_c0 is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 69, in <module>
    main()
    ~~~~^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/main.py", line 55, in main
    retrieval.build_index_from_pdf(str(pdf_to_process))
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/Documents/lab_nlp/doc_dev/Multimodel-RAG/agents/retrieval_agent.py", line 186, in build_index_from_pdf
    self.qdrant_client.upsert(collection_name=QDRANT_COLLECTION_NAME, points=batch, wait=True)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_client.py", line 1633, in upsert
    return self._client.upsert(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/qdrant_remote.py", line 1911, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        ordering=ordering,
        ^^^^^^^^^^^^^^^^^^
    ).result
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 987, in upsert_points
    return self._build_for_upsert_points(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        point_insert_operations=point_insert_operations,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api/points_api.py", line 512, in _build_for_upsert_points
    return self.api_client.request(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        type_=m.InlineResponse2006,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        content=body,
        ^^^^^^^^^^^^^
    )
    ^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/Users/vbi2/miniconda3/lib/python3.13/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value 0f50a23d-5427-479f-ba86-08dc1434ee0b_p4_c0 is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-10-26 09:39:54,653 - __main__ - INFO - ================================================================================
2025-10-26 09:39:54,654 - __main__ - INFO - Starting RAG System Index Builder (Layout-Aware Mode)
2025-10-26 09:39:54,654 - __main__ - INFO - ================================================================================
2025-10-26 09:39:54,654 - __main__ - INFO - Found 1 PDF(s). Processing the first one: fy25-financial-report_removed.pdf
2025-10-26 09:39:54,654 - agents.retrieval_agent - INFO - Initializing RetrievalAgent for Hybrid Pipeline...
2025-10-26 09:39:55,913 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333 "HTTP/1.1 200 OK"
2025-10-26 09:39:55,914 - agents.retrieval_agent - INFO - RetrievalAgent initialized successfully.
2025-10-26 09:39:55,915 - agents.retrieval_agent - INFO - Processing PDF 'fy25-financial-report_removed.pdf' with doc_id '0a1fc9ad-d269-454d-a1cd-c0a949164e9f'
2025-10-26 09:39:55,925 - agents.retrieval_agent - INFO - Extracting content from page 1/13...
2025-10-26 09:39:59,114 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_1.jpg: YES
2025-10-26 09:39:59,289 - agents.retrieval_agent - INFO - Extracting content from page 2/13...
2025-10-26 09:40:06,493 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_2.jpg: YES
2025-10-26 09:40:06,536 - agents.retrieval_agent - INFO - Extracting content from page 3/13...
2025-10-26 09:40:10,495 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_3.jpg: YES
2025-10-26 09:40:10,648 - agents.retrieval_agent - INFO - Extracting content from page 4/13...
2025-10-26 09:40:14,122 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_4.jpg: NO
2025-10-26 09:40:14,129 - agents.retrieval_agent - INFO - Extracting content from page 5/13...
2025-10-26 09:40:16,535 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_5.jpg: YES
2025-10-26 09:40:16,659 - agents.retrieval_agent - INFO - Extracting content from page 6/13...
2025-10-26 09:40:19,463 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_6.jpg: YES
2025-10-26 09:40:19,712 - agents.retrieval_agent - INFO - Extracting content from page 7/13...
2025-10-26 09:40:22,443 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_7.jpg: YES
2025-10-26 09:40:23,221 - agents.retrieval_agent - INFO - Extracting content from page 8/13...
2025-10-26 09:40:26,227 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_8.jpg: YES
2025-10-26 09:40:26,813 - agents.retrieval_agent - INFO - Extracting content from page 9/13...
2025-10-26 09:40:29,435 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_9.jpg: YES
2025-10-26 09:40:29,945 - agents.retrieval_agent - INFO - Extracting content from page 10/13...
2025-10-26 09:40:32,124 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_10.jpg: YES
2025-10-26 09:40:32,617 - agents.retrieval_agent - INFO - Extracting content from page 11/13...
2025-10-26 09:40:36,364 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_11.jpg: YES
2025-10-26 09:40:38,370 - agents.retrieval_agent - INFO - Extracting content from page 12/13...
2025-10-26 09:40:41,467 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_12.jpg: YES
2025-10-26 09:40:41,668 - agents.retrieval_agent - INFO - Extracting content from page 13/13...
2025-10-26 09:40:54,371 - agents.retrieval_agent - INFO - Layout analysis result for 0a1fc9ad-d269-454d-a1cd-c0a949164e9f_page_13.jpg: YES
2025-10-26 09:40:54,994 - agents.retrieval_agent - INFO - Starting parallel embedding for 31 chunks...
2025-10-26 09:41:02,508 - agents.retrieval_agent - INFO - Parallel embedding complete. Upserting to Qdrant...
2025-10-26 09:41:08,722 - httpx - INFO - HTTP Request: GET https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection "HTTP/1.1 200 OK"
2025-10-26 09:41:08,731 - agents.retrieval_agent - INFO - Collection 'multimodal-rag-collection' already exists.
2025-10-26 09:41:09,910 - httpx - INFO - HTTP Request: PUT https://2102a7b7-36e1-49bb-bcdc-6416ee7f3e23.us-east4-0.gcp.cloud.qdrant.io:6333/collections/multimodal-rag-collection/points?wait=true "HTTP/1.1 200 OK"
2025-10-26 09:41:09,911 - agents.retrieval_agent - INFO - Upserted batch 1 to Qdrant.
2025-10-26 09:41:09,911 - agents.retrieval_agent - INFO - ✓ Finished indexing 31 chunks.
2025-10-26 09:41:09,911 - __main__ - INFO - Index building completed successfully
